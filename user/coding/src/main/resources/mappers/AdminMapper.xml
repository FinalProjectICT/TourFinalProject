<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.example.coding.dao.AdminDAO">

	<!-- ******************* BoardDAO에 메소드명이랑 동일 ( id 값이 )  -->
										<!-- 원래 : com.example.domain.BoardVO -->
	<select id="tourList" resultType="AdminVO">
		SELECT t.tour_name tourName, t.tour_num tourNum, c.check_num checkNum
		FROM tour t
		LEFT OUTER JOIN `check` c
		ON c.tour_num = t.tour_num
	</select>
	
	<select id="tourdetail" parameterType="AdminVO" resultType="AdminVO">
	
		SELECT *
		FROM tour t
		LEFT OUTER JOIN img_detail id
								LEFT OUTER JOIN img ig
								ON ig.img_num = id.img_num
		ON id.tour_num = t.tour_num
		WHERE t.tour_num = #{tourNum}
	</select>

	<delete id="deleteNum" parameterType="AdminVO" >

		DELETE FROM tour WHERE tour_num = #{tourNum}

	</delete>

	<insert id="tourInsert" parameterType="AdminVO">

		INSERT INTO tour (tour_num,tour_name, tour_addr, tour_content, tour_site_addr) 
		VALUES (#{tour_num}, #{tour_name}, #{tour_addr}, #{tour_content}, #{tour_site_addr})
	
	</insert>
	
	<select id = "userList" parameterType="AdminVO" resultType="AdminVO">
	SELECT 	u.user_id userId, 
	u.user_name userName, 
	u.user_pass userPass, 
	u.user_tel userTel, 
	u.user_email userEmail, 
	u.user_addr userAddr, 
	u.user_gender userGender, 
	u.user_age userAge, 
	u.user_prefer_type1 userPreferType1 , 
	u.user_prefer_type2 userPreferType2 , 
	u.user_prefer_type3 userPreferType3, 
	u.user_prefer_loc1 userPreferLoc1, 
	u.user_prefer_loc2 userPreferLoc2 ,     
	u.user_prefer_loc3 userPreferLoc3,              
	u.admin_authority  adminAuthority ,             
	u.user_login_authority userLoginAuthority,         
	u.user_register_date userRegisterDate,              
	u.user_delete_date userDeleteDate
	FROM `user`u;
	</select>


	<select  id="touroviewList" parameterType="AdminVO" resultType="AdminVO">
	SELECT tvw.user_id user_id , 
	tvw.touroview_content touroview_content, 
	li.like_count like_count, 
	rp.report_count report_count,	
	tvw.touroview_regdate touroview_regdate, 
	tvw.touroview_update touroview_update
	FROM 	touroview tvw
	LEFT  JOIN `like` li ON li.touroview_num = tvw.touroview_num
	LEFT  JOIN `report` rp ON rp.touroview_num = tvw.touroview_num
	</select>

</mapper>
